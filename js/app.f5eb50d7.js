(function(e){function t(t){for(var a,c,o=t[0],l=t[1],i=t[2],h=0,d=[];h<o.length;h++)c=o[h],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&d.push(s[c][0]),s[c]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,i||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},s={app:0},r=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"002d":function(e,t,n){"use strict";n("22dd")},"0349":function(e,t,n){},"034f":function(e,t,n){"use strict";n("85ec")},"22dd":function(e,t,n){},"2f10":function(e,t,n){},"4ace":function(e,t,n){"use strict";n("7db5")},"554c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("a15b"),n("d81d"),n("d3b7"),n("25f0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"top-bar",attrs:{"data-topbar":""}},[e._m(0),n("section",{staticClass:"top-bar-section"},[n("ul",{staticClass:"left"},[n("li",{class:{active:"/zhui"==e.$route.path}},[n("router-link",{attrs:{to:"/zhui"}},[e._v("追更")])],1),n("li",{class:{active:"/explore"==e.$route.path}},[n("router-link",{attrs:{to:"/explore"}},[e._v("探索")])],1),n("li",{class:{active:"/more"==e.$route.path}},[n("router-link",{attrs:{to:"/more"}},[e._v("更多")])],1)])])]),n("router-view")],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"title-area"},[n("li",{staticClass:"name"},[n("h1",[n("a",{attrs:{href:"#/zhui"}},[e._v("爱追更")])])]),n("li",{staticClass:"toggle-topbar menu-icon"},[n("a",{attrs:{href:"#"}},[n("span",[e._v("Menu")])])])])}],c={name:"App"},o=c,l=(n("034f"),n("2877")),i=Object(l["a"])(o,s,r,!1,null,null,null),u=i.exports,h=n("8c4f"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.userChannels.length?n("div",{staticClass:"user-channels"},e._l(e.userChannels,(function(t){return n("div",{key:t._id,staticClass:"user-channel padding-box flex-between",style:{borderLeftColor:t.channel.channelTemplate.mainColor||"gray"}},[n("div",{staticClass:"flex-start",staticStyle:{flex:"auto",overflow:"hidden"}},[n("div",{staticClass:"channel-name no-wrap"},[n("router-link",{attrs:{to:"/channel/"+t.channel._id}},[e._v(e._s(t.channel.name))])],1),t.channelDataMessage?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.channelDataMessage.readed,expression:"!userChannel.channelDataMessage.readed"}],staticClass:"unreaded",style:{background:t.channel.channelTemplate.mainColor||"gray"}},[n("span",[e._v("新")])]):e._e()]),n("div",{staticClass:"notify",class:{"notify-on":t.notify},staticStyle:{flex:"none"}},[e.cloudAuth.currentUser.email?n("div",{on:{click:function(n){t.notify=!t.notify,e.switchNotify(t._id,t.notify)}}},[n("i",{staticClass:"fi-mail"})]):n("div",{on:{click:function(t){return e.$router.push("/more")}}},[n("i",{staticClass:"fi-mail"},[e._v("请登录")])])])])})),0):e.showExplore?n("div",[n("div",{staticClass:"empty-tip abs-center"},[n("div",{staticClass:"abs-center-content flex-start",staticStyle:{"flex-direction":"column"}},[n("p",{staticClass:"nothing not-importent"},[e._v("还没有任何订阅")]),n("div",{staticClass:"door"},[n("router-link",{staticStyle:{color:"#fff"},attrs:{to:"/explore"}},[e._v("探索")])],1)])]),n("div",{staticClass:"not-importent flex-around"},[n("router-link",{attrs:{to:"/about"}},[e._v("“爱追更”是什么？")])],1)]):e._e()])},f=[],m=(n("4160"),n("159b"),n("99af"),{getAll:function(e){return v(e,[])}}),p=20;function v(e,t){return e.skip(t.length).limit(p).get().then((function(n){return n.data.length==p?v(e,t.concat(n.data)):t.concat(n.data)}))}var y,C,g=m,_=Object(l["a"])(g,y,C,!1,null,null,null),b=_.exports,k={name:"Zhui",data:function(){return{userChannels:[],showExplore:!1}},mounted:function(){var e=this,t=this.cloud.database();b.getAll(t.collection("ty_user_channel").where({}).orderBy("top","desc").orderBy("updateTime","desc")).then((function(n){e.userChannels=n,e.showExplore=!0,e.userChannels.forEach(function(e){t.collection("ty_user_channel_data_message").where({"channelData.channel._id":e.channel._id}).orderBy("createTime","desc").limit(1).get().then(function(t){this.$set(e,"channelDataMessage",t.data[0])}.bind(this))}.bind(e))}))},methods:{switchNotify:function(e,t){this.cloud.database().collection("ty_user_channel").doc(e).update({notify:t})}}},A=k,w=(n("4ace"),Object(l["a"])(A,d,f,!1,null,"2ab5fe2e",null)),x=w.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main abs-center"},[n("div",{staticClass:"abs-center-content",staticStyle:{flex:"auto"}},[e._m(0),n("input",{staticClass:"inp",attrs:{placeholder:"输入你关心的人"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t.target.value)}}})])])},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:n("e2bf")}})])}],E={name:"Explore",methods:{search:function(e){this.$router.push({path:"/search",query:{keyword:e}})}}},M=E,N=(n("c60e"),Object(l["a"])(M,O,T,!1,null,"63c4d1d0",null)),P=N.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("input",{attrs:{placeholder:"输入你关心的人"},domProps:{value:e.keyword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$router.replace({query:{keyword:t.target.value}})}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.channels.length,expression:"channels.length"}]},[n("div",{staticClass:"not-importent"},[e._v("已收录")]),e._l(e.channels,(function(t){return n("div",{key:t._id,staticClass:"padding-box channel flex-start",on:{click:function(n){return e.$router.push("/channel/"+t._id)}}},[n("ChannelTemplateLogo",{attrs:{"main-color":t.channelTemplate.mainColor,text:t.channelTemplate.name.substr(0,1)}}),n("div",[n("div",[n("router-link",{attrs:{to:"/channel/"+t._id}},[e._v(e._s(t.name))])],1),n("div",{staticClass:"not-importent"},[e._v(e._s(t.channelTemplate.name))])])],1)}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.maybeChannels.length,expression:"maybeChannels.length"}]},[n("div",{staticClass:"not-importent"},[e._v("建议")]),e._l(e.maybeChannels,(function(t){return n("div",{key:t._id,staticClass:"padding-box channel flex-start",on:{click:function(n){return e.openMaybeChannel(t.name,t.channelTemplate._id)}}},[n("ChannelTemplateLogo",{attrs:{"main-color":t.channelTemplate.mainColor,text:t.channelTemplate.name.substr(0,1)}}),n("div",[n("div",[n("a",[e._v(" "+e._s(t.name)+" ")])]),n("div",{staticClass:"not-importent"},[e._v(" "+e._s(t.channelTemplate.name)+" ")])])],1)}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showNewChannelDoor,expression:"showNewChannelDoor"}]},[n("div",{staticClass:"not-importent"},[e._v("定制")]),n("div",{staticClass:"padding-box channel flex-start",staticStyle:{"word-break":"break-all"}},[n("ChannelTemplateLogo",{attrs:{text:"链"}}),n("div",[n("router-link",{attrs:{to:{path:"/new-channel",query:{url:e.keyword}}}},[e._v(e._s(e.keyword))])],1)],1)])])},J=[],j=(n("ac1f"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo",style:{background:e.mainColor}},[n("div",{staticClass:"text-logo"},[e._v(" "+e._s(e.text)+" ")])])}),D=[],S={name:"ChannelTemplateLogo",props:{text:String,mainColor:{type:String,value:"gray"}}},Y=S,U=(n("002d"),Object(l["a"])(Y,j,D,!1,null,"c745a1b4",null)),G=U.exports,q={name:"Search",props:["keyword"],data:function(){return{templates:[],channels:[],maybeChannels:[],finishedSearchCount:0,showNewChannelDoor:!1}},components:{ChannelTemplateLogo:G},mounted:function(){var e=this;b.getAll(this.cloud.database().collection("ty_channel_template").where({})).then((function(t){e.templates=t,e.keyword&&e.search(e.keyword)}))},watch:{keyword:function(e){e&&this.search(e)}},methods:{search:function(e){var t=this;console.log("搜索："+e),this.showNewChannelDoor=!1,/^https?:\/\//.test(e)&&(this.showNewChannelDoor=!0),this.channels=[],this.maybeChannels=[],this.finishedSearchCount=0,this.templates.forEach((function(n){t.cloud.callFunction({name:"resolveTyChannel",data:{templateId:n._id,key:e}}).then((function(e){t.finishedSearchCount++,e.result.errCode?405==e.result.errCode?t.maybeChannels=t.maybeChannels.concat(e.result.advices.map((function(e){return{name:"".concat(e),channelTemplate:n}}))):console.error(e.result.errMsg):t.channels=t.channels.concat([e.result.channel])})).catch((function(e){t.finishedSearchCount++,console.error(e)}))}))},openMaybeChannel:function(e,t){var n=this;this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:t,key:e}}).then((function(e){e.result.errCode?console.error(e.result.errMsg):n.$router.push("/channel/"+e.result.channel._id)})).catch((function(e){console.error(e)}))}}},F=q,B=(n("8c84"),Object(l["a"])(F,I,J,!1,null,"b9407438",null)),L=B.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more"},[n("div",[n("div",[e._m(0),n("div",{staticClass:"not-importent"},["ANONYMOUS"==e.user.loginType?n("div",{key:"user-youke"},[n("span",[e._v("游客")])]):n("div",{key:"user-email"},[n("span",[e._v(e._s(e.user.email))])])])]),n("div",{staticClass:"login-area"},["ANONYMOUS"==e.user.loginType?n("ul",{key:"no-eamil",staticClass:"button-group round"},[n("li",[n("button",{staticClass:"button",on:{click:e.signIn}},[e._v("登录")])]),n("li",[n("button",{staticClass:"button",on:{click:e.signUp}},[e._v("注册")])])]):n("ul",{key:"with-eamil",staticClass:"button-group round"},[n("li",[n("button",{staticClass:"button alert",on:{click:e.signOut}},[e._v("退出登录")])])])])]),n("p",[n("router-link",{attrs:{to:"/message-box"}},[e._v("消息"),n("span",{directives:[{name:"show",rawName:"v-show",value:e.lastUnreadedMessage,expression:"lastUnreadedMessage"}],staticClass:"label alert round"},[e._v("新")])])],1),e._m(1),n("p",[n("router-link",{attrs:{to:"/about"}},[e._v("关于")])],1)])},V=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-head"},[n("div",{staticStyle:{margin:"auto"}},[n("i",{staticClass:"fi-torso"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://support.qq.com/product/290950",target:"_blank"}},[e._v("反馈")])])}],z={name:"More",data:function(){return{user:this.cloudAuth.currentUser,lastUnreadedMessage:null}},mounted:function(){var e=this;this.cloud.database().collection("ty_user_channel_data_message").where({readed:!1}).orderBy("createTime","desc").limit(1).get().then((function(t){e.lastUnreadedMessage=t.data[0]||null}))},methods:{signIn:function(){var e=this,t=prompt("请输入邮箱");if(t){var n=prompt("请输入密码");n&&this.cloudAuth.signInWithEmailAndPassword(t,n).then((function(t){console.log("登录成功",t),e.user=t.user})).catch((function(e){console.error("登录失败",e),alert("邮箱或密码错误")}))}},signUp:function(){var e=this;this.updateUsername().then((function(){e.setPassword().then((function(){e.updateEmail()}))}))},updateEmail:function(){var e=this,t=prompt("请输入登录邮箱");return t?this.user.updateEmail(t).then((function(){return alert("验证邮件已发送"),e.user.refresh()})).catch((function(e){return console.error("更新失败",e),Promise.reject()})):Promise.reject()},setPassword:function(){var e=this;if(this.user.hasPassword)return Promise.resolve();var t=prompt("请设置登录密码");return t?this.cloudAuth.currentUser.updatePassword(t).then((function(){return e.user.refresh()})).catch((function(e){return console.error("更新密码失败",e),Promise.reject()})):Promise.reject()},updateUsername:function(){var e=this;return this.cloudAuth.currentUser.updateUsername(this.user.uid).then((function(){return e.user.refresh()})).catch((function(e){return console.error("更新用户名失败",e),Promise.reject()}))},signOut:function(){var e=this;this.cloudAuth.signOut().then((function(){e.cloudAuth.anonymousAuthProvider().signIn().then((function(t){console.log("登录成功",t),e.user=e.cloudAuth.currentUser})).catch((function(e){console.error("登录失败",e)}))}))}}},K=z,W=(n("749b"),Object(l["a"])(K,R,V,!1,null,"25b664fc",null)),Z=W.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel"},[e.channel?n("div",[n("h1",[e._v(" "+e._s(e.channel.name)+" ")]),n("div",{staticClass:"flex-start cells"},[n("div",{staticClass:"cell channel-template"},[n("div",{staticClass:"cell-icon"},[n("router-link",{attrs:{to:"/channel-template/"+e.channel.channelTemplate._id}},[n("i",{staticClass:"fi-folder"})])],1),n("div",{staticClass:"not-importent"},[e._v(" "+e._s(e.channel.channelTemplate.name)+" ")])]),e.channel.openResourceUrl?n("div",{staticClass:"cell"},[n("div",{staticClass:"cell-icon"},[n("a",{attrs:{href:e.channel.openResourceUrl,target:"_blank"}},[n("i",{staticClass:"fi-link"})])]),n("div",{staticClass:"not-importent"},[e._v("网页")])]):e._e(),e.userChannel?n("div",{staticClass:"notify-switch cell"},[n("div",{staticClass:"cell-icon",class:{"notify-switch-on":e.userChannel.notify}},[e.cloudAuth.currentUser.email?n("div",{on:{click:function(t){e.userChannel.notify=!e.userChannel.notify,e.switchNotify()}}},[n("i",{staticClass:"fi-mail"})]):n("div",{on:{click:function(t){return e.$router.push("/more")}}},[n("i",{staticClass:"fi-mail"})])]),n("div",{staticClass:"not-importent"},[e._v("通知我")])]):e._e()]),n("div",[e.userChannel?n("div",{key:"unsub"},[n("div",[n("button",{staticClass:"button secondary small expand",on:{click:e.unsub}},[e._v(" 已订阅 ")])])]):n("div",{key:"sub"},[n("button",{staticClass:"button small expand",on:{click:e.sub}},[e._v("订阅")])])]),e._l(e.channelDatas,(function(t){return n("div",{key:t._id,staticClass:"flex-start channel-data"},[n("div",{staticClass:"not-importent"},[n("span",[e._v(e._s(e._f("formatPass")(t.createTime)))])]),n("div",{staticClass:"datas"},e._l(t.channel.attrs||t.channel.channelTemplate.attrs,(function(a){return n("div",{key:a.name},[n("span",[e._v(e._s(a.name))]),n("span",{staticClass:"not-importent data-value"},[e._v(e._s(t.data[a.name]))])])})),0)])}))],2):e._e()])},Q=[],X={name:"Channel",props:["id"],data:function(){return{channel:null,userChannel:null,channelDatas:[]}},watch:{"userChannel.notify":function(e){this.userChannel&&this.cloud.database().collection("ty_user_channel").doc(this.userChannel._id).update({notify:e})}},mounted:function(){var e=this,t=this.cloud.database();t.collection("ty_channel").doc(this.id).get().then((function(t){e.channel=t.data[0]})),t.collection("ty_user_channel").where({"channel._id":this.id}).get().then((function(n){e.userChannel=n.data[0]||null,t.collection("ty_user_channel_data_message").where({"channelData.channel._id":e.id}).update({readed:!0}),t.collection("ty_user_channel_data_message").where({"channelData.channel._id":e.id,notify:"wait"}).update({data:{notify:"skip"}})})),t.collection("ty_channel_data").where({"channel._id":this.id,dataChanged:!0}).orderBy("createTime","desc").limit(20).get().then((function(t){e.channelDatas=t.data}))},methods:{sub:function(){var e=this;console.log("sub"),this.cloud.database().collection("ty_user_channel").add({channel:this.channel,notify:!1,createTime:Date.now()}).then((function(t){e.cloud.database().collection("ty_user_channel").doc(t.id).get().then((function(t){e.userChannel=t.data[0]}))}))},unsub:function(){var e=this;console.log("unsub"),this.cloud.database().collection("ty_user_channel").doc(this.userChannel._id).remove().then((function(){e.userChannel=null}))},switchNotify:function(){this.userChannel&&this.cloud.database().collection("ty_user_channel").doc(this.userChannel._id).update({notify:this.userChannel.notify})}}},$=X,ee=(n("a942"),Object(l["a"])($,H,Q,!1,null,"469685ee",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"new-channel"},[n("h1",[e._v(e._s(e.document.title))]),e._l(e.textAndDivList,(function(t){return n("div",{key:t.insideId,style:{paddingLeft:20*t.depth+"px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedSelectors,expression:"checkedSelectors"}],attrs:{type:"checkbox",id:t.insideId},domProps:{value:t.selector,checked:Array.isArray(e.checkedSelectors)?e._i(e.checkedSelectors,t.selector)>-1:e.checkedSelectors},on:{change:function(n){var a=e.checkedSelectors,s=n.target,r=!!s.checked;if(Array.isArray(a)){var c=t.selector,o=e._i(a,c);s.checked?o<0&&(e.checkedSelectors=a.concat([c])):o>-1&&(e.checkedSelectors=a.slice(0,o).concat(a.slice(o+1)))}else e.checkedSelectors=r}}}),n("label",{attrs:{for:t.insideId}},[e._v(e._s("text"==t.type?t.content:">>"))])])})),n("div",[n("button",{staticClass:"button expand round",on:{click:e.submit}},[e._v("确定")])])],2):e._e()},ae=[],se=(n("5319"),{name:"NewChannel",props:["url"],data:function(){return{document:null,checkedSelectors:[]}},mounted:function(){var e=this;this.cloud.callFunction({name:"loadWebDocument",data:{url:this.url}}).then((function(t){if(t.result.errCode)alert(t.result.errMsg);else{var n=0;t.result.document.list.forEach((function(e){e.depth=n,"div"==e.type?n++:"/div"==e.type&&n--})),e.document=t.result.document}})).catch((function(e){console.error(e)}))},computed:{textAndDivList:function(){return this.document.list.filter((function(e){return"text"==e.type||"div"==e.type}))}},methods:{submit:function(){var e=this;this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:"other",resource:{resourceUrl:this.document.url,channelName:this.document.title,openResourceUrl:this.document.url,attrs:this.checkedSelectors.map((function(e,t){return{path:e,name:"追更数据".concat(t+1)}}))}}}).then((function(t){t.result.errCode?alert(t.result.errMsg):e.$router.replace("/channel/"+t.result.channel._id)})).catch((function(e){console.error(e)}))}}}),re=se,ce=(n("61fa"),Object(l["a"])(re,ne,ae,!1,null,"418ec672",null)),oe=ce.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-box"},[n("h1",[e._v("消息列表")]),e._l(e.messages,(function(t){return n("div",{key:t._id,staticClass:"flex-start message"},[n("ChannelTemplateLogo",{attrs:{"main-color":t.channelData.channel.channelTemplate.mainColor,text:t.channelData.channel.channelTemplate.name.substr(0,1)}}),n("div",{staticClass:"flex-start channel-data"},[n("router-link",{attrs:{to:"/channel/"+t.channelData.channel._id}},[e._v(e._s(t.channelData.channel.name))]),n("div",{staticClass:"not-importent"},[n("span",[e._v(e._s(e._f("formatPass")(t.createTime)))])]),n("div",{staticClass:"datas"},e._l(t.channelData.channel.attrs||t.channelData.channel.channelTemplate.attrs,(function(a){return n("div",{key:a.name,staticClass:"data"},[n("span",[e._v(e._s(a.name))]),n("span",{staticClass:"not-importent data-value"},[e._v(e._s(t.channelData.data[a.name]))])])})),0)],1)],1)})),n("div",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}]},[n("button",{staticClass:"button expand round",on:{click:function(t){return e.loadMessages(e.messages)}}},[e._v(" 加载更多 ")])])],2)},ie=[],ue={name:"MessageBox",data:function(){return{messages:[],loaded:!1,more:!1,pageSize:20}},components:{ChannelTemplateLogo:G},mounted:function(){this.loadMessages(),this.cloud.callFunction({name:"readAllTyUserMessage"}).then((function(e){console.log(e.result)}))},methods:{loadMessages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cloud.database().collection("ty_user_channel_data_message").where({}).orderBy("createTime","desc").skip(t.length).limit(this.pageSize).get().then((function(n){e.messages=t.concat(n.data),e.more=n.data.length==e.pageSize,e.loaded=!0}))}}},he=ue,de=(n("59c0"),Object(l["a"])(he,le,ie,!1,null,"729ed98e",null)),fe=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v("关于爱追更")]),n("h2",[e._v("第1章 爱")]),n("p",[e._v("在茫茫网络世界中，你发现了真爱，TA不定期发布动态")]),n("h2",[e._v("第2章 追")]),n("p",[e._v("订阅TA的频道，本应用帮你实时追踪")]),n("h2",[e._v("第3章 更")]),n("p",[e._v("TA更新动态，你第一时间收到通知，把爱的首赞及留言放在前排")]),n("div",{staticStyle:{"margin-top":"50px"}},[n("button",{staticClass:"button expand round",on:{click:function(t){return e.$router.push("/explore")}}},[e._v("现在就去找到TA")])])])},pe=[],ve=(n("aceb"),{}),ye=Object(l["a"])(ve,me,pe,!1,null,"c8d4ddae",null),Ce=ye.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.channelTemplate?n("div",{staticClass:"channel-template"},[n("h1",[e._v(e._s(e.channelTemplate.name))]),n("p",[e._v(e._s(e.channelTemplate.desc))]),e.channelTemplate.keyName?n("div",[n("input",{attrs:{placeholder:"请输入"+e.channelTemplate.keyName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t.target.value)}}}),e.advices.length?n("div",[n("p",{staticClass:"not-importent"},[e._v("建议")]),e._l(e.advices,(function(t){return n("div",{key:t},[n("button",{on:{click:function(n){return e.search(t)}}},[e._v(e._s(t))])])}))],2):e._e()]):e._e()]):e._e()},_e=[],be={name:"ChannelTemplate",props:["id"],data:function(){return{channelTemplate:null,advices:[]}},mounted:function(){var e=this,t=this.cloud.database();t.collection("ty_channel_template").doc(this.id).get().then((function(t){e.channelTemplate=t.data[0]}))},methods:{search:function(e){var t=this;this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:this.channelTemplate._id,key:e}}).then((function(e){e.result.errCode?405==e.result.errCode?t.advices=e.result.advices:alert(e.result.errMsg):t.$router.push("/channel/"+e.result.channel._id)})).catch((function(e){console.error(e)}))}}},ke=be,Ae=(n("6376"),Object(l["a"])(ke,ge,_e,!1,null,"0e187c5f",null)),we=Ae.exports,xe=n("d148");function Oe(e){return e=e.toString(),e[1]?e:"0"+e}a["a"].use(h["a"]),a["a"].filter("formatPass",(function(e){var t=(new Date).getTime();if(t-e<6e4)return"刚刚";var n=new Date(e),a=n.getFullYear(),s=n.getMonth()+1,r=n.getDate(),c=n.getHours(),o=n.getMinutes(),l=new Date(t),i=l.getFullYear(),u=l.getMonth()+1,h=l.getDate();return a==i?s==u&&r==h?"今天 "+[c,o].map(Oe).join(":"):[s,r].map(Oe).join("-")+" "+[c,o].map(Oe).join(":"):[a,s,r].map(Oe).join("-")+" "+[c,o].map(Oe).join(":")})),a["a"].config.productionTip=!1;var Te=[{path:"/",redirect:"/zhui"},{path:"/zhui",component:x},{path:"/explore",component:P},{path:"/search",component:L,props:function(e){return{keyword:e.query.keyword}}},{path:"/more",component:Z},{path:"/channel/:id",component:te,props:!0},{path:"/new-channel",component:oe,props:function(e){return{url:e.query.url}}},{path:"/channel-template/:id",component:we,props:!0},{path:"/message-box",component:fe},{path:"/about",component:Ce}],Ee=new h["a"]({routes:Te});function Me(){var e=a["a"].prototype.cloud=xe["a"].init({env:"dev-9g0suwuw61afb9f3"}),t=a["a"].prototype.cloudAuth=e.auth({persistence:"local"});return t.hasLoginState()?(console.log("无需重复登录"),Promise.resolve()):t.anonymousAuthProvider().signIn().then((function(e){return console.log("登录成功",e),Promise.resolve()})).catch((function(e){return console.error("登录失败",e),Promise.reject()}))}Me().then((function(){new a["a"]({render:function(e){return e(u)},router:Ee}).$mount("#app")}))},"59c0":function(e,t,n){"use strict";n("dca4")},"61fa":function(e,t,n){"use strict";n("f26a")},6376:function(e,t,n){"use strict";n("871f")},"749b":function(e,t,n){"use strict";n("2f10")},"7db5":function(e,t,n){},"81e6":function(e,t,n){},"85ec":function(e,t,n){},"871f":function(e,t,n){},"8c84":function(e,t,n){"use strict";n("554c")},a942:function(e,t,n){"use strict";n("0349")},aceb:function(e,t,n){"use strict";n("81e6")},b752:function(e,t,n){},c60e:function(e,t,n){"use strict";n("b752")},dca4:function(e,t,n){},e2bf:function(e,t){e.exports="data:image/png;base64,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"},f26a:function(e,t,n){}});
//# sourceMappingURL=app.f5eb50d7.js.map