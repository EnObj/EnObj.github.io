(function(e){function t(t){for(var a,i,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var l=n[o];0!==s[l]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},s={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15f5":function(e,t,n){e.exports=n.p+"img/logined.687bce67.svg"},1771:function(e,t,n){var a={"./an-login.svg":"1dca","./explore.png":"e2bf","./logined.svg":"15f5","./logo.png":"cf05","./my-style.css":"b8b1","./un-login.svg":"a1af"};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id="1771"},"1dca":function(e,t,n){e.exports=n.p+"img/an-login.fce77a4b.svg"},2659:function(e,t,n){},"2fc4":function(e,t,n){},"385a":function(e,t,n){"use strict";n("efd7")},"387b":function(e,t,n){},"3f60":function(e,t,n){"use strict";n("2fc4")},"456b":function(e,t,n){},"484a":function(e,t,n){"use strict";n("2659")},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("7db0"),n("c740"),n("4160"),n("a15b"),n("d81d"),n("a434"),n("d3b7"),n("25f0"),n("159b");var a=n("3835"),s=(n("0fae"),n("9e2f")),r=n.n(s),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=n("2f62"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-row",{attrs:{type:"flex",justify:"space-around"}},[n("el-col",{attrs:{xs:24,sm:20,md:16,lg:12}},[n("div",{staticClass:"main"},[n("keep-alive",{attrs:{include:"Zhui"}},[n("router-view")],1)],1)])],1)],1)},c=[],u=(n("b0c0"),{name:"App",methods:{openPage:function(e){this.$router.push("/"+e.name).catch(console.error)},loadUserChannels:function(){var e=this.$loading(),t=this.cloud.database();this.$store.dispatch("loadUserChannels",t).then(function(){e.close()}.bind(this))}},computed:{activeTab:function(){return this.$route.path.substr(1)}},created:function(){this.cloudAuth.onLoginStateChanged(function(e){e&&this.loadUserChannels()}.bind(this))}}),d=u,h=(n("f83e"),n("2877")),m=Object(h["a"])(d,l,c,!1,null,"acf2014a",null),p=m.exports,f=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"flex-between"},[n("h1",{staticClass:"logo"}),n("div",{staticClass:"btns"},[n("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(t){return e.$router.push("/explore")}}}),n("el-badge",{attrs:{"is-dot":"",hidden:!e.lastUnreadedMessage}},[n("el-button",{attrs:{icon:"el-icon-s-comment",circle:""},on:{click:function(t){return e.$router.push("/message-box")}}})],1),n("el-button",{attrs:{icon:"el-icon-user-solid",circle:""},on:{click:function(t){return e.$router.push("/cloud")}}})],1)]),e.userChannels.length?n("div",{staticClass:"user-channels"},e._l(e.userChannels,(function(t){return n("div",{key:t._id,staticClass:"user-channel",on:{click:function(n){return e.openChannel(t)}}},[n("div",{staticClass:"channel-logo-c"},[n("div",{staticClass:"channel-logo",style:{borderColor:t.channel.channelTemplate.mainColor||"gray"}},[n("el-badge",{staticStyle:{margin:"auto",display:"block"},attrs:{"is-dot":"",hidden:!t.channelDataMessage||t.channelDataMessage.readed}},[n("div",{staticClass:"logo-temp"},[e._v(e._s(t.channel.name.substr(0,1)))])]),n("div",{staticClass:"notify",class:{"notify-on":t.notify}},[n("i",{staticClass:"el-icon-bell"})]),t.top?n("div",{staticClass:"top"}):e._e()],1)]),n("div",{staticClass:"channel-name no-wrap"},[e._v(" "+e._s(t.channel.name)+" ")])])})),0):e.userChannelsLoaded?n("div",[n("div",{staticClass:"empty-tip abs-center"},[n("div",{staticClass:"abs-center-content flex-start",staticStyle:{"flex-direction":"column"}},[n("p",{staticClass:"nothing not-importent"},[e._v("还没有任何订阅")]),n("el-button",{attrs:{type:"primary",round:""},on:{click:function(t){return e.$router.push("/explore")}}},[e._v("探索")])],1)]),n("div",{staticClass:"not-importent flex-around"},[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/about")}}},[e._v("“爱追更”是什么？")])],1)]):e._e()])},v=[],b={name:"Zhui",data:function(){return{lastUnreadedMessage:null}},computed:Object(o["b"])(["userChannels","userChannelsLoaded"]),beforeRouteEnter:function(e,t,n){n((function(e){e.cloud.database().collection("ty_user_channel_data_message").where({readed:!1}).orderBy("createTime","desc").limit(1).get().then((function(t){e.lastUnreadedMessage=t.data[0]||null}))}))},methods:{switchNotify:function(e){this.$store.dispatch("switchUserChannelNotify",{db:this.cloud.database(),userChannelId:e})},openChannel:function(e){e.channelDataMessage=null,this.$router.push("/channel/"+e.channel._id)}}},y=b,C=(n("d6ab"),Object(h["a"])(y,g,v,!1,null,"fcd42346",null)),w=C.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("探索")])],1),n("div",{staticStyle:{margin:"20px 0"}},[n("el-input",{attrs:{placeholder:"搜索你关心的人",clearable:"","prefix-icon":"el-icon-search"},on:{change:function(t){return e.search(e.keyword)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)},x=[],k=(n("ac1f"),n("5319"),{name:"Explore",data:function(){return{keyword:""}},methods:{search:function(e){this.$router.replace({path:"/search",query:{keyword:e}})}}}),A=k,T=(n("7427"),Object(h["a"])(A,_,x,!1,null,"5e352c16",null)),E=T.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",{attrs:{to:{path:"/explore"}}},[e._v("探索")]),n("el-breadcrumb-item",[e._v("搜索")])],1),n("div",{staticClass:"inp"},[n("el-input",{attrs:{placeholder:"搜索你关心的人",clearable:"","prefix-icon":"el-icon-search"},on:{change:function(t){return e.$router.replace({query:{keyword:e.keywordVal}})}},model:{value:e.keywordVal,callback:function(t){e.keywordVal=t},expression:"keywordVal"}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.searchProgress&&100!=e.searchProgress,expression:"searchProgress != 0 && searchProgress != 100"}],staticStyle:{"margin-bottom":"20px"}},[n("el-progress",{attrs:{percentage:e.searchProgress,"show-text":!1,"stroke-width":3}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.channels.length,expression:"channels.length"}]},[n("div",{staticClass:"not-importent"},[e._v("已收录")]),e._l(e.channels,(function(t){return n("div",{key:t._id,staticClass:"padding-box channel flex-start",on:{click:function(n){return e.$router.push("/channel/"+t._id)}}},[n("ChannelTemplateLogo",{attrs:{"main-color":t.channelTemplate.mainColor,text:t.channelTemplate.name.substr(0,1)}}),n("div",[n("div",[e._v(" "+e._s(t.name)+" ")]),n("div",{staticClass:"not-importent"},[e._v(e._s(t.channelTemplate.name))])])],1)}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.maybeChannels.length,expression:"maybeChannels.length"}]},[n("div",{staticClass:"not-importent"},[e._v("建议")]),e._l(e.maybeChannels,(function(t){return n("div",{key:t._id,staticClass:"padding-box channel flex-start",on:{click:function(n){return e.openMaybeChannel(t.name,t.channelTemplate._id)}}},[n("ChannelTemplateLogo",{attrs:{"main-color":t.channelTemplate.mainColor,text:t.channelTemplate.name.substr(0,1)}}),n("div",[n("div",[n("a",[e._v(" "+e._s(t.name)+" ")])]),n("div",{staticClass:"not-importent"},[e._v(" "+e._s(t.channelTemplate.name)+" ")])])],1)}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showNewChannelDoor,expression:"showNewChannelDoor"}]},[n("div",{staticClass:"not-importent"},[e._v("定制")]),n("div",{staticClass:"padding-box channel flex-start",staticStyle:{"word-break":"break-all"}},[n("ChannelTemplateLogo",{attrs:{text:"链"}}),n("div",{on:{click:function(t){return e.$router.push({path:"/new-channel",query:{url:e.keyword}})}}},[e._v(" "+e._s(e.keyword)+" ")])],1)])],1)},P=[],D=(n("99af"),n("841c"),{getAll:function(e){return L(e,[])}}),O=20;function L(e,t){return e.skip(t.length).limit(O).get().then((function(n){return n.data.length==O?L(e,t.concat(n.data)):t.concat(n.data)}))}var M,S,I=D,U=Object(h["a"])(I,M,S,!1,null,null,null),R=U.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logo",style:{background:e.mainColor}},[n("div",{staticClass:"text-logo"},[e._v(" "+e._s(e.text)+" ")])])},j=[],J={name:"ChannelTemplateLogo",props:{text:String,mainColor:{type:String,value:"gray"}}},q=J,Y=(n("8ab9"),Object(h["a"])(q,N,j,!1,null,"180a1f30",null)),B=Y.exports,G={name:"Search",props:["keyword"],data:function(){return{templates:[],channels:[],maybeChannels:[],finishedSearchCount:0,showNewChannelDoor:!1,keywordVal:this.keyword}},components:{ChannelTemplateLogo:B},mounted:function(){var e=this;R.getAll(this.cloud.database().collection("ty_channel_template").where({})).then((function(t){e.templates=t,e.keyword&&e.search(e.keyword)}))},watch:{keyword:function(e){e&&this.search(e)}},computed:{searchProgress:function(){return this.templates.length?Math.floor(this.finishedSearchCount/this.templates.length*100):0}},methods:{search:function(e){var t=this,n=this.$loading();console.log("搜索："+e),this.showNewChannelDoor=!1,/^https?:\/\//.test(e)&&(this.showNewChannelDoor=!0),this.channels=[],this.maybeChannels=[],this.finishedSearchCount=0,this.templates.forEach((function(a){t.cloud.callFunction({name:"resolveTyChannel",data:{templateId:a._id,key:e}}).then((function(e){t.finishedSearchCount++,1==t.finishedSearchCount&&n.close(),e.result.errCode?405==e.result.errCode?t.maybeChannels=t.maybeChannels.concat(e.result.advices.map((function(e){return{name:"".concat(e),channelTemplate:a}}))):console.error(e.result.errMsg):t.channels=t.channels.concat([e.result.channel])})).catch((function(e){t.finishedSearchCount++,1==t.finishedSearchCount&&n.close(),console.error(e)}))}))},openMaybeChannel:function(e,t){var n=this;this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:t,key:e}}).then((function(e){e.result.errCode?console.error(e.result.errMsg):n.$router.push("/channel/"+e.result.channel._id)})).catch((function(e){console.error(e)}))}}},V=G,W=(n("a8e0"),Object(h["a"])(V,F,P,!1,null,"378d4c16",null)),Z=W.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"more"},[n("h1",[e._v("更多")]),n("div",{staticClass:"main"},[n("p",[n("el-badge",{staticClass:"item",attrs:{value:"新",hidden:!e.lastUnreadedMessage}},[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/message-box")}}},[e._v("消息")])],1)],1),n("p",[n("el-link",{attrs:{href:"https://support.qq.com/product/290950",target:"_blank",type:"primary"}},[e._v("反馈")])],1),n("p",[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/about")}}},[e._v("关于")])],1)]),n("div",{staticClass:"not-importent to-enobj"},[e._v(" power by "),n("el-link",{attrs:{href:"https://enobj.cn",type:"info"}},[e._v("enobj.cn")])],1)])},K=[],z={name:"More",data:function(){return{lastUnreadedMessage:null}},mounted:function(){var e=this;this.cloud.database().collection("ty_user_channel_data_message").where({readed:!1}).orderBy("createTime","desc").limit(1).get().then((function(t){e.lastUnreadedMessage=t.data[0]||null}))},methods:{}},H=z,Q=(n("3f60"),Object(h["a"])(H,$,K,!1,null,"72d66120",null)),X=Q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel"},[e.channel?n("div",[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",{attrs:{to:{path:"/channel-template/"+e.channel.channelTemplate._id}}},[e._v(e._s(e.channel.channelTemplate.name))]),n("el-breadcrumb-item",[e._v("频道")])],1),n("div",{staticClass:"flex-between"},[n("h3",[e._v(" "+e._s(e.channel.name)+" ")]),n("div",{staticStyle:{flex:"none","margin-left":"15px"}},[e.userChannel?n("div",{key:"unsub"},[n("div",[n("el-button",{attrs:{type:"default",size:"mini",icon:"el-icon-check"},on:{click:e.unsub}})],1)]):n("div",{key:"sub"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.sub}})],1)])]),n("div",{staticClass:"flex-start cells"},[n("div",{staticClass:"cell channel-template"},[n("div",{staticClass:"cell-icon"},[n("router-link",{attrs:{to:"/channel-template/"+e.channel.channelTemplate._id}},[n("i",{staticClass:"el-icon-folder switch-on"})])],1),n("div",{staticClass:"not-importent channel-template-name"},[e._v(" "+e._s(e.channel.channelTemplate.name)+" ")])]),e.channel.openResourceUrl?n("div",{staticClass:"cell"},[n("div",{staticClass:"cell-icon"},[n("a",{attrs:{href:e.channel.openResourceUrl,target:"_blank"}},[n("i",{staticClass:"el-icon-link switch-on"})])]),n("div",{staticClass:"not-importent"},[e._v("网页")])]):e._e(),e.userChannel?n("div",{key:"notify",staticClass:"notify-switch cell"},[n("div",{staticClass:"cell-icon",class:{"switch-on":e.userChannel.notify}},[e.cloudAuth.currentUser.email?n("div",{on:{click:e.switchNotify}},[n("i",{staticClass:"el-icon-bell"})]):n("div",{on:{click:function(t){return e.$router.push("/cloud")}}},[n("i",{staticClass:"el-icon-bell"})])]),n("div",{staticClass:"not-importent"},[e._v("通知我")])]):e._e(),e.userChannel?n("div",{key:"top",staticClass:"cell"},[n("div",{staticClass:"cell-icon",class:{"switch-on":e.userChannel.top},on:{click:e.switchTop}},[n("i",{staticClass:"el-icon-top"})]),n("div",{staticClass:"not-importent"},[e._v("置顶")])]):e._e(),e.channel.channelTemplate.showPost||e.channel.showPost?n("div",{staticClass:"cell"},[n("div",{staticClass:"cell-icon"},[n("router-link",{attrs:{to:"/channel-post-box/"+e.channel._id}},[n("i",{staticClass:"el-icon-key switch-on"})])],1),n("div",{staticClass:"not-importent"},[e._v("考古")])]):e._e()]),n("el-divider",{attrs:{"content-position":"left"}},[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",{staticStyle:{color:"gray"}},[e._v("正在追更")])]),n("div",{staticClass:"channel-datas"},e._l(e.channelDatas,(function(t){return n("div",{key:t._id,staticClass:"flex-start channel-data"},[n("div",{staticClass:"datas"},e._l(t.channel.attrs||t.channel.channelTemplate.attrs,(function(a){return n("div",{key:a.name},[n("span",{staticClass:"not-importent data-value"},[e._v(e._s(t.data[a.name]))])])})),0),n("div",{staticClass:"not-importent"},[n("span",[e._v(e._s(e._f("formatPass")(t.createTime)))])])])})),0)],1):e._e()])},te=[],ne={name:"Channel",props:["id"],data:function(){return{channel:null,channelDatas:[]}},computed:{userChannel:function(){return this.$store.getters.userChannelOfChannel(this.id)},nextListenTime:function(){if(this.channel){if(this.channel.disabled)return"不再扫描";var e=new Date(this.channel.nextListenTime);return"".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}return""}},watch:{id:function(){this.initChannel()}},created:function(){this.initChannel()},methods:{initChannel:function(){var e=this,t=this.cloud.database();t.collection("ty_channel").doc(this.id).get().then((function(t){e.channel=t.data[0]})),t.collection("ty_user_channel_data_message").where({"channelData.channel._id":this.id}).update({readed:!0}).then((function(){e.$store.commit("deleteUserChannelDataMessage",{channelId:e.id})})),t.collection("ty_user_channel_data_message").where({"channelData.channel._id":this.id,notify:"wait"}).update({data:{notify:"skip"}}),t.collection("ty_channel_data").where({"channel._id":this.id,dataChanged:!0}).orderBy("createTime","desc").limit(20).get().then((function(t){e.channelDatas=t.data}))},sub:function(){var e=this;console.log("sub"),this.cloud.database().collection("ty_user_channel").add({channel:this.channel,notify:!1,createTime:Date.now()}).then((function(t){e.cloud.database().collection("ty_user_channel").doc(t.id).get().then((function(t){e.$store.commit("addUserChannel",t.data[0])}))}))},unsub:function(){var e=this;console.log("unsub"),this.cloud.database().collection("ty_user_channel").doc(this.userChannel._id).remove().then((function(){e.$store.commit("deleteUserChannel",e.userChannel._id)}))},switchNotify:function(){this.userChannel&&this.$store.dispatch("switchUserChannelNotify",{db:this.cloud.database(),userChannelId:this.userChannel._id})},switchTop:function(){this.userChannel&&this.$store.dispatch("switchUserChannelTop",{db:this.cloud.database(),userChannelId:this.userChannel._id})}}},ae=ne,se=(n("385a"),Object(h["a"])(ae,ee,te,!1,null,"97d28dde",null)),re=se.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.document?n("div",{staticClass:"new-channel"},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("DIY")])],1),n("h1",[e._v(e._s(e.document.title))]),e._l(e.textAndDivList,(function(t){return n("div",{key:t.insideId,staticClass:"item",style:{paddingLeft:20*t.depth+"px"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedSelectors,expression:"checkedSelectors"}],attrs:{type:"checkbox",id:t.insideId},domProps:{value:t.selector,checked:Array.isArray(e.checkedSelectors)?e._i(e.checkedSelectors,t.selector)>-1:e.checkedSelectors},on:{change:function(n){var a=e.checkedSelectors,s=n.target,r=!!s.checked;if(Array.isArray(a)){var i=t.selector,o=e._i(a,i);s.checked?o<0&&(e.checkedSelectors=a.concat([i])):o>-1&&(e.checkedSelectors=a.slice(0,o).concat(a.slice(o+1)))}else e.checkedSelectors=r}}}),n("label",{attrs:{for:t.insideId}},[e._v(" "+e._s("text"==t.type?t.content:">>"))])])})),n("div",{staticStyle:{margin:"15px 0"}},[n("el-button",{attrs:{type:"primary",round:""},on:{click:e.submit}},[e._v("确定")])],1)],2):e._e()},oe=[],le={name:"NewChannel",props:["url"],data:function(){return{document:null,checkedSelectors:[]}},mounted:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading"});this.cloud.callFunction({name:"loadWebDocument",data:{url:this.url}}).then((function(n){if(n.result.errCode)alert(n.result.errMsg);else{var a=0;n.result.document.list.forEach((function(e){e.depth=a,"div"==e.type?a++:"/div"==e.type&&a--})),e.document=n.result.document}t.close()})).catch((function(e){t.close(),console.error(e)}))},computed:{textAndDivList:function(){return this.document.list.filter((function(e){return"text"==e.type||"div"==e.type}))}},methods:{submit:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading"});this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:"other",resource:{resourceUrl:this.document.url,channelName:this.document.title,openResourceUrl:this.document.url,attrs:this.checkedSelectors.map((function(e,t){return{path:e,name:"追更数据".concat(t+1)}}))}}}).then((function(n){t.close(),n.result.errCode?alert(n.result.errMsg):e.$router.replace("/channel/"+n.result.channel._id)})).catch((function(e){t.close(),console.error(e)}))}}},ce=le,ue=(n("a119"),Object(h["a"])(ce,ie,oe,!1,null,"15d66e1e",null)),de=ue.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-box",staticStyle:{overflow:"auto"}},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("消息")])],1),e._l(e.messages,(function(t){return n("div",{key:t._id,staticClass:"flex-start message"},[n("ChannelTemplateLogo",{style:{visibility:t.sameChannel?"hidden":"visible"},attrs:{"main-color":t.channelData.channel.channelTemplate.mainColor,text:t.channelData.channel.channelTemplate.name.substr(0,1)}}),n("div",{staticClass:"flex-start channel-data"},[t.sameChannel?e._e():n("el-badge",{attrs:{"is-dot":"",hidden:t.readed}},[n("div",[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return e.$router.push("/channel/"+t.channelData.channel._id)}}},[e._v(e._s(t.channelData.channel.name))])],1)]),n("div",{staticClass:"not-importent"},[n("span",[e._v(e._s(e._f("formatPass")(t.createTime)))])]),n("div",{staticClass:"datas"},e._l(t.channelData.channel.attrs||t.channelData.channel.channelTemplate.attrs,(function(a){return n("div",{key:a.name,staticClass:"data"},[n("span",{staticClass:"not-importent data-value"},[e._v(e._s(t.channelData.data[a.name]))])])})),0)],1)],1)})),n("div",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}],staticClass:"load-more"},[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.loadMessages(e.messages)}}},[e._v("加载更多")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loaded&&!e.messages.length,expression:"loaded && !messages.length"}],staticClass:"nothing not-importent"},[e._v(" 啥也没有 ")])],2)},me=[],pe={name:"MessageBox",data:function(){return{messages:[],loaded:!1,more:!1,pageSize:20}},components:{ChannelTemplateLogo:B},mounted:function(){this.loadMessages(),this.cloud.callFunction({name:"readAllTyUserMessage"}).then((function(e){console.log(e.result)}))},methods:{loadMessages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.$loading();this.cloud.database().collection("ty_user_channel_data_message").where({}).orderBy("createTime","desc").skip(t.length).limit(this.pageSize).get().then((function(a){a.data.forEach((function(e,n){var s=a.data[n-1];0==n&&(s=t[t.length-1]),s&&s.channelData.channel._id==e.channelData.channel._id&&(e.sameChannel=!0)})),e.messages=t.concat(a.data),e.more=a.data.length==e.pageSize,e.loaded=!0,n.close()})).catch((function(){n.close()}))}}},fe=pe,ge=(n("abf1"),Object(h["a"])(fe,he,me,!1,null,"040b81eb",null)),ve=ge.exports,be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.channel?n("div",[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",{attrs:{to:{path:"/channel/"+e.channel._id}}},[e._v(e._s(e.channel.name))]),n("el-breadcrumb-item",[e._v("考古")])],1),n("div",{staticClass:"channel-posts"},e._l(e.channelPosts,(function(t){return n("div",{key:t._id,staticClass:"channel-post"},[n("div",{staticClass:"channel-post-time"},[e._v(" "+e._s(e._f("formatPass")(t.postTime))+" ")]),n("div",{staticClass:"channel-post-content"},[n("el-link",{attrs:{href:t.openResourceUrl,target:"_blank"}},[e._v(e._s(t.content))])],1)])})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:e.more,expression:"more"}],staticClass:"load-more"},[n("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.loadChannelPosts(e.channelPosts)}}},[e._v("加载更多")])],1)],1):e._e()},ye=[],Ce={name:"ChannelPostBox",props:["id"],data:function(){return{channelPosts:[],channel:null,more:!1}},created:function(){this.loadChannelPosts()},watch:{id:"loadChannelPosts"},methods:{loadChannelPosts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.$loading(),a=20;this.cloud.callFunction({name:"loadTyChannelPost",data:{channelId:this.id,skip:t.length,limit:a}}).then((function(s){e.channelPosts=t.concat(s.result),e.more=s.result.length==a,n.close()})).catch((function(){n.close()}));var s=this.cloud.database();s.collection("ty_channel").doc(this.id).get().then((function(t){e.channel=t.data[0]}))}}},we=Ce,_e=(n("e26c"),Object(h["a"])(we,be,ye,!1,null,"684383c8",null)),xe=_e.exports,ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("关于")])],1),n("h1",[e._v("关于爱追更")]),n("h2",[e._v("第1章 爱")]),n("p",[e._v("在茫茫网络世界中，你发现了真爱，TA不定期发布动态")]),n("h2",[e._v("第2章 追")]),n("p",[e._v("订阅TA的频道，本应用帮你实时追踪")]),n("h2",[e._v("第3章 更")]),n("p",[e._v("TA更新动态，你第一时间收到通知，把爱的首赞及留言放在前排")]),n("div",{staticStyle:{"margin-top":"50px"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/explore")}}},[e._v("现在就去找到TA")])],1)],1)},Ae=[],Te=(n("e79f"),{}),Ee=Object(h["a"])(Te,ke,Ae,!1,null,"acb58668",null),Fe=Ee.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.channelTemplate?n("div",{staticClass:"channel-template"},[n("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("节点")])],1),n("h1",[e._v(e._s(e.channelTemplate.name))]),n("p",[e._v(e._s(e.channelTemplate.desc))]),e.channelTemplate.keyName?n("div",[n("div",{staticStyle:{"margin-top":"30px"}},[n("el-input",{attrs:{placeholder:"请输入"+e.channelTemplate.keyName,clearable:"","prefix-icon":"el-icon-search"},on:{change:function(t){return e.search(e.keyword)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e.advices.length?n("div",[n("p",{staticClass:"not-importent"},[e._v("建议")]),e._l(e.advices,(function(t){return n("div",{key:t,staticClass:"padding-box channel flex-start",on:{click:function(n){return e.search(t)}}},[n("ChannelTemplateLogo",{attrs:{"main-color":e.channelTemplate.mainColor,text:e.channelTemplate.name.substr(0,1)}}),n("div",[n("div",[n("a",[e._v(" "+e._s(t)+" ")])])])],1)}))],2):e._e()]):e._e()],1):e._e()},De=[],Oe={name:"ChannelTemplate",props:["id"],data:function(){return{channelTemplate:null,advices:[],keyword:""}},components:{ChannelTemplateLogo:B},mounted:function(){var e=this,t=this.cloud.database();t.collection("ty_channel_template").doc(this.id).get().then((function(t){e.channelTemplate=t.data[0]}))},methods:{search:function(e){var t=this,n=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading"});this.cloud.callFunction({name:"resolveTyChannel",data:{templateId:this.channelTemplate._id,key:e}}).then((function(e){n.close(),e.result.errCode?405==e.result.errCode?t.advices=e.result.advices:t.$message({message:e.result.errMsg,type:"warning"}):t.$router.push("/channel/"+e.result.channel._id)})).catch((function(e){n.close(),console.error(e),t.$message({message:"操作失败，请稍后重试",type:"warning"})}))}}},Le=Oe,Me=(n("484a"),Object(h["a"])(Le,Pe,De,!1,null,"54d35ce0",null)),Se=Me.exports,Ie=n("d148"),Ue=(n("b8b1"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello-world"},[a("el-breadcrumb",{staticStyle:{"margin-top":"20px"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("账户")])],1),a("div",{staticClass:"user"},[a("div",{staticClass:"user-icon"},[a("img",{attrs:{src:n("1771")("./"+e.userIcon),alt:"头像"}})]),a("div",{staticClass:"user-name"},[e._v(e._s(e.userName))])]),a("div",{staticClass:"actions"},[a("div",{staticClass:"action"},[e.user.logined&&0!=e.user.loginType?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.loginForm.email=e.user.email,e.showLoginDialog=!0}}},[e._v(e._s(e.loginText))])],1),a("div",{staticClass:"action"},[e.user.logined&&0==e.user.loginType&&!e.user.email?a("el-button",{attrs:{type:"info"},on:{click:function(t){e.showSetEmailDialog=!0}}},[e._v("绑定邮箱")]):e._e()],1),a("div",{staticClass:"action"},[e.user.logined?e._e():a("el-button",{attrs:{type:"text",loading:e.loginLoading},on:{click:e.loginAsAnonymous}},[e._v("匿名登录")])],1),a("div",{staticClass:"action"},[e.user.logined?e._e():a("el-button",{attrs:{type:"success"},on:{click:function(t){e.showRegisterDialog=!0}}},[e._v("注册")])],1),a("div",{staticClass:"action"},[e.user.logined&&0!=e.user.loginType?a("el-popconfirm",{attrs:{title:"确定退出登录吗？"},on:{confirm:e.logout}},[a("el-button",{attrs:{slot:"reference",type:"danger",loading:e.logoutLoading},slot:"reference"},[e._v("退出")])],1):e._e()],1)]),a("el-dialog",{attrs:{title:"登录",visible:e.showLoginDialog,width:"350px"},on:{"update:visible":function(t){e.showLoginDialog=t}}},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-user"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email","string"===typeof t?t.trim():t)},expression:"loginForm.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","prefix-icon":"el-icon-key","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v(" 登录 ")]),a("el-button",{attrs:{type:"text"},on:{click:e.forgetPassword}},[e._v("忘记密码")])],1)],1)],1),a("el-dialog",{attrs:{title:"绑定邮箱",visible:e.showSetEmailDialog,width:"350px"},on:{"update:visible":function(t){e.showSetEmailDialog=t}}},[a("el-form",{ref:"setEmailForm",attrs:{model:e.setEmailForm,rules:e.setEmailRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-user"},model:{value:e.setEmailForm.email,callback:function(t){e.$set(e.setEmailForm,"email","string"===typeof t?t.trim():t)},expression:"setEmailForm.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","prefix-icon":"el-icon-key","show-password":""},model:{value:e.setEmailForm.password,callback:function(t){e.$set(e.setEmailForm,"password","string"===typeof t?t.trim():t)},expression:"setEmailForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.setEmailLoading},on:{click:e.setEmail}},[e._v(" 确定 ")])],1)],1)],1),a("el-dialog",{attrs:{title:"注册",visible:e.showRegisterDialog,width:"350px"},on:{"update:visible":function(t){e.showRegisterDialog=t}}},[a("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-user"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email","string"===typeof t?t.trim():t)},expression:"registerForm.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码","prefix-icon":"el-icon-key","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password","string"===typeof t?t.trim():t)},expression:"registerForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"success",loading:e.registerLoading},on:{click:e.register}},[e._v(" 确定 ")])],1)],1)],1),a("el-dialog",{attrs:{title:"重置密码",visible:e.showResetPasswordDialog,width:"350px"},on:{"update:visible":function(t){e.showResetPasswordDialog=t}}},[a("el-form",{ref:"resetPasswordForm",attrs:{model:e.resetPasswordForm,rules:e.resetPasswordRules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"邮箱",prop:" "}},[a("el-input",{attrs:{placeholder:"邮箱","prefix-icon":"el-icon-user"},model:{value:e.resetPasswordForm.email,callback:function(t){e.$set(e.resetPasswordForm,"email","string"===typeof t?t.trim():t)},expression:"resetPasswordForm.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.resetPasswordLoading},on:{click:e.resetPassword}},[e._v(" 确定 ")])],1)],1)],1)],1)}),Re=[],Ne=(n("96cf"),n("1da1")),je={name:"EoCloud",props:{msg:String},data:function(){return{user:{email:"",logined:!1,loginType:""},showLoginDialog:!1,loginForm:{email:"",password:""},loginRules:{email:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},loginLoading:!1,logoutLoading:!1,showSetEmailDialog:!1,setEmailForm:{email:"",password:""},setEmailRules:{email:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},setEmailLoading:!1,showRegisterDialog:!1,registerForm:{email:"",password:""},registerRules:{email:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur"}]},registerLoading:!1,showResetPasswordDialog:!1,resetPasswordForm:{email:""},resetPasswordRules:{email:[{required:!0,trigger:"blur"}]},resetPasswordLoading:!1}},computed:{userIcon:function(){return this.user.logined?"0"==this.user.loginType?"an-login.svg":"logined.svg":"un-login.svg"},userName:function(){return this.user.logined?"0"==this.user.loginType?"匿名用户":this.user.email:"未登录"},loginText:function(){return(this.user.email?"使用"+this.user.email:"邮箱")+"登录"}},created:function(){var e=this;this.cloudAuth.onLoginStateChanged((function(t){console.log(t),t?(e.user.logined=!0,e.user.loginType="ANONYMOUS"==t.loginType?"0":"1",e.user.email=t.user.email):e.user.logined=!1}))},methods:{login:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loginLoading=!0,t.prev=1,t.next=4,e.$refs.loginForm.validate();case 4:return t.next=6,e.cloudAuth.signInWithEmailAndPassword(e.loginForm.email,e.loginForm.password);case 6:e.showLoginDialog=!1,e.$notify({message:"登录成功",type:"success"}),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$notify({message:t.t0.message||"请检查表单",type:"error"});case 13:return t.prev=13,e.loginLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])})))()},logout:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.logoutLoading=!0;try{e.cloudAuth.signOut()}catch(n){e.$notify({message:n.message,type:"error"})}finally{e.logoutLoading=!1}case 2:case"end":return t.stop()}}),t)})))()},loginAsAnonymous:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loginLoading=!0,t.prev=1,t.next=4,e.cloudAuth.anonymousAuthProvider().signIn();case 4:e.showLoginDialog=!1,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),e.$notify({message:t.t0.message,type:"error"});case 10:return t.prev=10,e.loginLoading=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,7,10,13]])})))()},setEmail:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setEmailLoading=!0,t.prev=1,t.next=4,e.cloudAuth.currentUser.updateUsername(e.cloudAuth.currentUser.uid);case 4:return t.next=6,e.cloudAuth.currentUser.updatePassword(e.setEmailForm.password);case 6:return t.next=8,e.cloudAuth.currentUser.updateEmail(e.setEmailForm.email);case 8:e.showSetEmailDialog=!1,e.$notify({message:"验证邮件已发送，请检查邮箱以激活",type:"success"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.$notify({message:t.t0.message,type:"error"});case 15:return t.prev=15,e.setEmailLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})))()},register:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.registerLoading=!0,t.prev=1,t.next=4,e.cloudAuth.signUpWithEmailAndPassword(e.registerForm.email,e.registerForm.password);case 4:e.showRegisterDialog=!1,e.$notify({message:"验证邮件已发送，请检查邮箱以激活",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$notify({message:t.t0.message,type:"error"});case 11:return t.prev=11,e.registerLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))()},forgetPassword:function(){this.resetPasswordForm.email=this.loginForm.email,this.showResetPasswordDialog=!0},resetPassword:function(){var e=this;return Object(Ne["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resetPasswordLoading=!0,t.prev=1,t.next=4,e.cloudAuth.sendPasswordResetEmail(e.resetPasswordForm.email);case 4:e.showResetPasswordDialog=!1,e.$notify({message:"验证邮件已发送，请检查邮箱以激活",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$notify({message:t.t0.message,type:"error"});case 11:return t.prev=11,e.resetPasswordLoading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))()}}},Je=je,qe=(n("b28e"),Object(h["a"])(Je,Ue,Re,!1,null,"1798e4a2",null)),Ye=qe.exports,Be=i["default"].prototype.cloud=Ie["a"].init({env:"dev-9g0suwuw61afb9f3"}),Ge=i["default"].prototype.cloudAuth=Be.auth({persistence:"local"});function Ve(e){return e=e.toString(),e[1]?e:"0"+e}i["default"].use(f["a"]),i["default"].use(o["a"]),i["default"].use(r.a),i["default"].filter("formatPass",(function(e){var t=(new Date).getTime();if(t-e<6e4)return"刚刚";var n=new Date(e),a=n.getFullYear(),s=n.getMonth()+1,r=n.getDate(),i=n.getHours(),o=n.getMinutes(),l=new Date(t),c=l.getFullYear(),u=l.getMonth()+1,d=l.getDate();return a==c?s==u&&r==d?"今天 "+[i,o].map(Ve).join(":"):[s,r].map(Ve).join("-")+" "+[i,o].map(Ve).join(":"):[a,s,r].map(Ve).join("-")+" "+[i,o].map(Ve).join(":")})),i["default"].config.productionTip=!1;var We=[{path:"/",redirect:"/zhui"},{path:"/zhui",component:w},{path:"/explore",component:E},{path:"/search",component:Z,props:function(e){return{keyword:e.query.keyword}}},{path:"/more",component:X},{path:"/channel/:id",component:re,props:!0},{path:"/new-channel",component:de,props:function(e){return{url:e.query.url}}},{path:"/channel-template/:id",component:Se,props:!0},{path:"/message-box",component:ve},{path:"/channel-post-box/:id",component:xe,props:!0},{path:"/about",component:Fe},{path:"/cloud",component:Ye}],Ze=new f["a"]({routes:We});Ze.beforeEach((function(e,t,n){"/cloud"===e.path||Ge.hasLoginState()?n():n("/cloud")}));var $e=new o["a"].Store({state:{userChannels:[],userChannelsLoaded:!1},getters:{userChannelOfChannel:function(e){return function(t){return e.userChannels.find((function(e){return e.channel._id==t}))}}},mutations:{setUserChannels:function(e,t){e.userChannelsLoaded=!0,e.userChannels=t.map((function(e){return e.channelDataMessage=null,"top"in e||(e.top=!1),"notify"in e||(e.notify=!1),e}))},setUserChannelDataMessage:function(e,t){var n=t.userChannelLocation,a=t.userChannelDataMessage;e.userChannels[n].channelDataMessage=a},deleteUserChannelDataMessage:function(e,t){var n=t.channelId,a=e.userChannels.find((function(e){return e.channel._id==n}));a&&(a.channelDataMessage=null)},setUserChannelNotify:function(e,t){var n=t.userChannelId,a=t.notify,s=e.userChannels.find((function(e){return e._id==n}));s.notify=a},addUserChannel:function(e,t){e.userChannels.push(t)},deleteUserChannel:function(e,t){e.userChannels=e.userChannels.filter((function(e){return e._id!=t}))},userChannelBeTop:function(e,t){var n=e.userChannels.findIndex((function(e){return e._id==t})),s=e.userChannels.splice(n,1),r=Object(a["a"])(s,1),i=r[0];i.top=!0,e.userChannels.unshift(i)},userChannelNotTop:function(e,t){var n=e.userChannels.findIndex((function(e){return e._id==t})),s=e.userChannels.splice(n,1),r=Object(a["a"])(s,1),i=r[0];i.top=!1;var o=e.userChannels.findIndex((function(e){return!e.top}));e.userChannels.splice(-1==o?e.userChannels.length:o,0,i)}},actions:{loadUserChannels:function(e,t){var n=e.commit,a=e.dispatch;return R.getAll(t.collection("ty_user_channel").where({}).orderBy("top","desc").orderBy("updateTime","desc")).then((function(e){n("setUserChannels",e),e.forEach((function(e,n){a("loadUserChannelDataMessage",{db:t,channelId:e.channel._id,index:n})}))}))},loadUserChannelDataMessage:function(e,t){var n=e.commit,a=t.db,s=t.channelId,r=t.index;return a.collection("ty_user_channel_data_message").where({"channelData.channel._id":s}).orderBy("createTime","desc").limit(1).get().then((function(e){n("setUserChannelDataMessage",{userChannelLocation:r,userChannelDataMessage:e.data[0]})}))},switchUserChannelNotify:function(e,t){var n=e.commit,a=e.state,s=t.db,r=t.userChannelId,i=a.userChannels.find((function(e){return e._id==r})),o=!i.notify;return n("setUserChannelNotify",{userChannelId:r,notify:o}),s.collection("ty_user_channel").doc(r).update({notify:o})},switchUserChannelTop:function(e,t){var n=e.state,a=e.commit,s=t.db,r=t.userChannelId,i=n.userChannels.find((function(e){return e._id==r})),o=!i.top;return a(o?"userChannelBeTop":"userChannelNotTop",r),s.collection("ty_user_channel").doc(r).update({top:o})}}});new i["default"]({render:function(e){return e(p)},router:Ze,store:$e}).$mount("#app")},"5a16":function(e,t,n){},7427:function(e,t,n){"use strict";n("7cad")},"7b02":function(e,t,n){},"7cad":function(e,t,n){},"8ab9":function(e,t,n){"use strict";n("930e")},"8b4c":function(e,t,n){},"930e":function(e,t,n){},a119:function(e,t,n){"use strict";n("cecf")},a1af:function(e,t,n){e.exports=n.p+"img/un-login.fe221741.svg"},a8e0:function(e,t,n){"use strict";n("f4cc")},abf1:function(e,t,n){"use strict";n("387b")},b28e:function(e,t,n){"use strict";n("d528")},b8b1:function(e,t,n){},cecf:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.c320dd18.png"},d528:function(e,t,n){},d6ab:function(e,t,n){"use strict";n("7b02")},e26c:function(e,t,n){"use strict";n("5a16")},e2bf:function(e,t){e.exports="data:image/png;base64,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"},e79f:function(e,t,n){"use strict";n("456b")},efd7:function(e,t,n){},f4cc:function(e,t,n){},f83e:function(e,t,n){"use strict";n("8b4c")}});
//# sourceMappingURL=app.c9954c32.js.map